@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

<div class="container">
    <button id="btnPostularse" class="btn-primary" data-id=@ViewBag.Oferta.Id>Postularse</button>
    <label>@ViewBag.Oferta.Titulo</label>
    <label>@ViewBag.Oferta.Vacantes</label>
    <label>@ViewBag.Oferta.Salario</label>
    <label>@ViewBag.Oferta.Duracion_Contrato</label>
    <label>@ViewBag.Oferta.Fecha_Publicacion</label>
    <label>@ViewBag.Oferta.Nombre_Empresa</label>
    <label>@ViewBag.Oferta.Ubi_Pais</label>
    <label>@ViewBag.Oferta.Ubi_Pro</label>
    <ul>
        @foreach (var dia in (List<Dictionary<string, string>>)ViewBag.Horario)
        {
            <li>
                <h4>@dia["Dia"]</h4>
                <p>Primer horario: @dia["Horario1"]</p>
                <p>Segundo horario: @dia["Horario2"]</p>
            </li>
        }
    </ul>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {

        $("#btnPostularse").click(function () {

            let Id = $(this).data("id");

            $.ajax({
                url: "/OfertaEmpleoPostulante/PostularseOferta",
                type: "POST",
                data: { id_ofertaempleo: Id },
                success: function (response) {
                    alert("Usted se ha postulado a la oferta de trabajo");
                },
                error: function () {
                    alert("Error al postularse");
                }
            });
        });
    });
</script>